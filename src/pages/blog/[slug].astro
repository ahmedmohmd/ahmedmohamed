---
import BlockQuote from "@components/markdown/BlockQuote.astro";
import H1 from "@components/markdown/H1.astro";
import H2 from "@components/markdown/H2.astro";
import Hr from "@components/markdown/Hr.astro";
import P from "@components/markdown/P.astro";
import Pre from "@components/markdown/Pre.astro";
import BlogLayout from "@layouts/BlogLayout.astro";

export const getStaticPaths = async () => {
  const articles = await Astro.glob("../../data/articles/**/*.mdx");
  const nonDraftArticles = articles.filter((post) => !post.frontmatter.draft);

  return nonDraftArticles.map((article) => {
    return {
      params: { slug: article.frontmatter.slug },
      props: { article },
    };
  });
};

const {
  Content,
  frontmatter: { title, cover, date, excerpt },
} = Astro.props.article;
---

<BlogLayout title={title} cover={cover} date={date} description={excerpt}
  ><Content
    components={{
      h2: H2,
      p: P,
      pre: Pre,
      hr: Hr,
      blockquote: BlockQuote,
      h1: H1,
    }}
  />
</BlogLayout>

<style>
  .article-main-title {
    -webkit-text-stroke: 1px white; /* width and color */
  }
</style>
